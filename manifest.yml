defaults: &defaults
  manifest_version: 3
  name: Feedbin Subscribe & Save
  version: "1.5"
  description: Subscribe to feeds and save pages to Feedbin.
  icons:
    32:  assets/images/icon-32.png
    48:  assets/images/icon-48.png
    64:  assets/images/icon-64.png
    96:  assets/images/icon-96.png
    128: assets/images/icon-128.png
    256: assets/images/icon-256.png
    512: assets/images/icon-512.png
  permissions:
    - activeTab
    - scripting
    - storage
  action:
    default_popup: index.html
    default_title: Feedbin Subscribe & Save
  commands:
    _execute_action:
      description: Open the extension
      suggested_key:
        default: Ctrl+Shift+F
        mac: MacCtrl+Shift+F
    open_in_background:
      description: Open current article in a background tab
      suggested_key:
        default: Alt+V
  background:
    service_worker: assets/javascript/worker.js
  content_scripts:
  - matches: [https://feedbin.com/*]
    js: [assets/javascript/feedbin_content.js]

# Safari adds `nativeMessaging` permission to
# handle authentication with the Feedbin app.
# Safari is also the only browser with full SVG
# support including dark mode tinting.
safari:
  <<: *defaults
  action:
    default_popup: index.html
    default_title: Feedbin Subscribe & Save
    default_icon: assets/images/toolbar-icon.svg
  permissions:
    - activeTab
    - scripting
    - storage
    - nativeMessaging
  browser_specific_settings:
    safari:
      strict_min_version: "16.4"

# Firefox requires square icons
firefox:
  <<: *defaults
  icons:
    32: assets/images/icon-square-32.png
    64: assets/images/icon-square-64.png
  background:
    scripts: [assets/javascript/worker.js]
  browser_specific_settings:
    gecko:
      id: support@feedbin.com
      strict_min_version: "128.0"

chrome:
  <<: *defaults
  browser_specific_settings:
    chrome:
      strict_min_version: "111"